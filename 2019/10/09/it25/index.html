<!DOCTYPE html>
<html lang="zh-TW">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  
  <!--Author-->
  
  <meta name="author" content="Kai Chi">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="資料庫(SQL)建立表格 欄位介紹">
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="K7">
  <!--Type page-->
  
      <meta property="og:type" content="article">
  
  <!--Page Cover-->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Title -->
  
  <title>資料庫(SQL)建立表格 欄位介紹 - K7</title>


  <link rel="shortcut icon" href="https://hexo.io/icon/favicon-96x96.png">

  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">

  <!----------------------------
  https://github.com/GallenHu/hexo-theme-Daily

 _____            _   _
|  __ \          (_) | |
| |  | |   __ _   _  | |  _   _
| |  | |  / _` | | | | | | | | |
| |__| | | (_| | | | | | | |_| |
|_____/   \__,_| |_| |_|  \__, |
                          __/ |
                         |___/

    --------------------------->

</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="https://hexo.io/logo.svg" alt="K7" height="60">
        
      </a>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  home
                
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  archive
                
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
  <div class="post">
    <!-- Post Content -->
    <div class="container">
      <article>
        <!-- Title date & tags -->
        <div class="post-header">
          <h1 class="entry-title">
            資料庫(SQL)建立表格 欄位介紹
            
          </h1>
          <p class="posted-on">
          2019-10-09
          </p>
          <div class="tags-links">
            
              
                <a href="/tags/前後端開發/" rel="tag">
                  前後端開發
                </a>
              
                <a href="/tags/菜鳥日誌/" rel="tag">
                  菜鳥日誌
                </a>
              
                <a href="/tags/Ruby on Rails/" rel="tag">
                  Ruby on Rails
                </a>
              
            
          </div>
        </div>
        <!-- Post Main Content -->
        <div class="entry-content has_line_number">
          <p>表格是資料庫中儲存資料的基本架構。在絕大部份的情況下，資料庫廠商不可能知道您需要如何儲存您的 資料，所以通常您會需要自己在資料庫中建立表格。雖然許多資料庫工具可以讓您在不需用到 SQL 的情況下 建立表格，不過由於表格是一個最基本的架構</p>
<p>在建立 CREATE TABLE 的語法之前，我們最好先對表格這個東西 有些多一點的瞭解。表格被分為欄位 (column) 及列位 (row)。每一列代表一筆資料，而每一欄代表一筆資料的 一部份。舉例來說，如果我們有一個記載顧客資料的表格，那欄位就有可能包括姓、名、地址、城市、國家、 生日‧‧‧等等。當我們對表格下定義時，我們需要註明欄位的標題，以及那個欄位的資料種類。</p>
<p>那，資料種類是什麼呢？資料可能是以許多不同的形式存在的。它可能是一個整數 (例如 1)，、一個浮點數 (例如 0.55)、一個字串 (例如 ‘sql’)、一個日期/時間 (例如 ‘2019-JAN-25 03:22:22’)、或甚至是 以二進法 (binary) 的狀態存在。當我們在對一個表格下定義時，我們需要對每一個欄位的資料種類下定義。 (例如 ‘姓’ 這個欄位的資料種類是 char(50)──代表這是一個 50 個字元的字串)。我們需要注意的一點是 不同的資料庫有不同的資料種類，所以在對表格做出定義之前最好先參考一下資料庫本身的說明。</p>
<p>CREATE TABLE 的語法是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"表格名"</span>(<span class="string">"欄位 1"</span> <span class="string">"欄位 1 資料種類"</span> , <span class="string">"欄位 2"</span> <span class="string">"欄位 2 資料種類"</span> ,... )</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>如果是以上面的例子會變成</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer(First_Name <span class="built_in">char</span>(<span class="number">50</span>),Last_Name <span class="built_in">char</span>(<span class="number">50</span>),Address <span class="built_in">char</span>(<span class="number">50</span>),City <span class="built_in">char</span>(<span class="number">50</span>),Country <span class="built_in">char</span>(<span class="number">25</span>),Birth_Date datetime);</span><br></pre></td></tr></table></figure>

<p>我們可以限制哪一些資料可以存入表格中。這些限制可以在表格初創時藉由 CREATE TABLE 語句來指定，或是之後藉由 ALTER TABLE 語句來指定。</p>
<p>常見的限制有以下幾種：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NOT NULL</span><br><span class="line">UNIQUE</span><br><span class="line">CHECK</span><br><span class="line">主鑑 (Primary Key)</span><br><span class="line">外來鑑 (Foreign Key)</span><br></pre></td></tr></table></figure>

<h2 id="NOT-NULL"><a href="#NOT-NULL" class="headerlink" title="NOT NULL"></a>NOT NULL</h2><p>在沒有做出任何限制的情況下，一個欄位是允許有 NULL 值得。如果我們不允許一個欄位含有 NULL 值，我們就需要對那個欄位做出 NOT NULL 的指定。</p>
<p>舉例來說，在以下的語句中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">(<span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"> Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"> First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>

<p>“SID” 和 “Last_Name” 這兩個欄位是不允許有 NULL 值，而 “First_Name” 這個欄位是可以有 NULL 值得。</p>
<h2 id="UNIQUE"><a href="#UNIQUE" class="headerlink" title="UNIQUE"></a>UNIQUE</h2><p>UNIQUE 限制是保證一個欄位中的所有資料都是有不一樣的值。</p>
<p>舉例來說，在以下的語句中，</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">(<span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"> Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>),</span><br><span class="line"> First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>

<p>“SID” 欄位不能有重複值存在，而 “Last_Name” 及 “First_Name” 這兩個欄位則是允許有重複值存在。</p>
<p>請注意，一個被指定為主鑑的欄位也一定會含有 UNIQUE 的特性。相對來說，一個 UNIQUE 的欄位並不一定會是一個主鍵。</p>
<h2 id="CHECK"><a href="#CHECK" class="headerlink" title="CHECK"></a>CHECK</h2><p>CHECK 限制是保證一個欄位中的所有資料都是符合某些條件。</p>
<p>舉例來說，在以下的語句中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">(<span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">CHECK</span> (<span class="keyword">SID</span> &gt; <span class="number">0</span>),</span><br><span class="line">Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>),</span><br><span class="line">First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>

<p>“SID” 攔只能包含大於 0 的整數。</p>
<p>請注意，CHECK 限制目前尚未被執行於 MySQL 資料庫上。</p>
<h2 id="主鍵-Primary-Key"><a href="#主鍵-Primary-Key" class="headerlink" title="主鍵 (Primary Key)"></a>主鍵 (Primary Key)</h2><p>主鍵每一筆資料都是表格中的唯一值。換言之，它是用來獨一無二地確認一個表格中的每一行資料。主鍵可以是原本資料內的一個欄位，或是一個人造欄位 (與原本資料沒有關係的欄位)。主鍵可以包含一或多個欄位。當主鍵包含多個欄位時，稱為組合鍵 (Composite Key)。</p>
<p>主鍵可以在建置新表格時設定 (運用 CREATE TABLE 語句)，或是以改變現有的表格架構方式設定 (運用 ALTER TABLE 語句)。</p>
<p>以下舉幾個在建置新表格時設定主鍵的方式：</p>
<p>MySQL:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">(<span class="keyword">SID</span> <span class="built_in">integer</span>,</span><br><span class="line">Last_Name <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">First_Name <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="keyword">SID</span>));</span><br></pre></td></tr></table></figure>

<p>PRIMARY KEY (SID)這段就是指定 SID 為主鍵</p>
<p>改變現有表格架構來設定主鍵的方式：</p>
<p>MySQL:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Customer <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="keyword">SID</span>);</span><br></pre></td></tr></table></figure>

<p>重點：<br>用 ALTER TABLE 語句來添加主鍵之前，我們需要確認被用來當做主鍵的欄位是設定為 『NOT NULL』 ；也就是說，那個欄位一定不能沒有資料。</p>
<h2 id="外來鍵-foreign-key"><a href="#外來鍵-foreign-key" class="headerlink" title="外來鍵(foreign key)"></a>外來鍵(foreign key)</h2><p>外來鍵是一個(或數個)指向另外一個表格主鍵的欄位。外來鍵的目的是確定資料的參考完整性 (Referential Integrity)。換言之，只有被准許的資料值才會被存入資料庫內。</p>
<p>舉例來說，假設我們有兩個表格：一個 CUSTOMER 表格，裡面記錄了所有顧客的資料；另一個 ORDERS 表格，裡面記錄了所有顧客訂購的資料。在這裡的一個限制，就是所有的訂購資料中的顧客，都一定是要跟在 CUSTOMER 表格中存在。在這裡，我們就會在 ORDERS 表格中設定一個外來鍵，而這個外來鍵是指向 CUSTOMER 表格中的主鍵。這樣一來，我們就可以確定所有在 ORDERS 表格中的顧客都存在 CUSTOMER 表格中。換句話說，ORDERS 表格之中，不能有任何顧客是不存在於 CUSTOMER 表格中的資料。</p>
<p>這兩個表格的結構將會是如下：</p>
<p><a href="https://ithelp.ithome.com.tw/upload/images/20191009/20118842Dhfw5ONgd0.png" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/upload/images/20191009/20118842Dhfw5ONgd0.png</a></p>
<p><a href="https://ithelp.ithome.com.tw/upload/images/20191009/20118842wq9be8D4ZF.png" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/upload/images/20191009/20118842wq9be8D4ZF.png</a></p>
<p>在以上的例子中，ORDERS 表格中的 Customer_SID 欄位是一個指向 CUSTOMER 表格中 SID 欄位的外來鍵。</p>
<p>在建置 ORDERS 表格時指定外來鍵的方式：</p>
<p>MySQL:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ORDERS</span><br><span class="line">(Order_ID <span class="built_in">integer</span>,</span><br><span class="line">Order_Date <span class="built_in">date</span>,</span><br><span class="line">Customer_SID <span class="built_in">integer</span>,</span><br><span class="line">Amount <span class="keyword">double</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (Order_ID),</span><br><span class="line"><span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (Customer_SID) <span class="keyword">REFERENCES</span> CUSTOMER (<span class="keyword">SID</span>));</span><br></pre></td></tr></table></figure>

<p>以下的例子則是藉著改變表格架構來指定外來鍵。這裡假設 ORDERS 表格已經被建置，而外來鍵尚未被指定：</p>
<p>MySQL:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ORDERS</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (Customer_SID) <span class="keyword">REFERENCES</span> CUSTOMER (<span class="keyword">SID</span>);</span><br></pre></td></tr></table></figure>

<p>參考資料：</p>
<p><a href="https://www.1keydata.com/tw/sql/sql.html" target="_blank" rel="noopener">SQL 語法</a></p>

        </div>
      </article>
    </div>
    <!-- Comments -->
    <div class="container">
      
<section id="comment">
  <!-- <h1 class="title">留言</h1> -->

  
</section>


    </div>
    <!-- Pre or Next -->
    <div class="nav-links">
      
        <div class="nav-previous">
          <a href="/2019/10/10/it26/" rel="prev"><span class="meta-arraw meta-arraw-left"></span> 上一頁</a>
        </div>
      
      
        <div class="nav-next">
          <a href="/2019/10/08/it24/" rel="prev">下一頁 <span class="meta-arraw meta-arraw-right"></span></a>
        </div>
      
    </div>

  </div>
</div>


  <!-- Footer -->
  <!-- Footer-widgets -->
<div class="footer-widgets">
  <div class="row inside-wrapper">
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">關於本站</h1>
        <div class="custom-widget-content">
          
          <ul><li><a href="https://medium.com/@jok002787">文章分享</a></li></ul>
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">與我聯系</h1>
        <div class="widget-text">
          
            
              <a href="https://github.com/kaichi1216" class="icon icon-github" target="_blank">github</a>
            
              <a href="mailto:jok002787@gmail.com" class="icon icon-mail" target="_blank">mail</a>
            
              <a href="https://twitter.com/McL1TeXDx3PkO51" class="icon icon-twitter" target="_blank">twitter</a>
            
          
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">站內搜索</h1>
        <div class="widget-text">
          <form onSubmit="return appDaily.submitSearch('')">
            <p>
              <input type="text" placeholder="search..." id="homeSearchInput">
            </p>
            <!-- <input type="submit" value="GO"> -->
          </form>
        </div>
      </aside>
    </div>
  </div>
</div>
<!-- Footer -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149600171-1');
</script>

<meta name="google-site-verification" content="H8YnPKVSCYTBh2AtkE7LnUSVi399v6NJYjsVxyLYSWU" />

<footer class="site-info">
  <p>
    <span>K7 &copy; 2020</span>
    
      <span class="split">|</span>
      <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> with Theme <a href="https://github.com/kaichi1216" target="_blank">Daily</a></span>
    
  </p>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>





</body>

</html>
